/* ============================================
   RESPONSIVE FOUNDATION - Import FIRST
   Establishes baseline responsive rules
   ============================================ */

/* ===== CRITICAL: Prevent Horizontal Overflow ===== */
html, body {
  width: 100%;
  max-width: 100vw; /* Prevent scrollbar-induced overflow */
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

*, *::before, *::after {
  box-sizing: border-box;
}

/* ===== UNIFIED PAGE STRUCTURE ===== */
/* This replaces .page-frame inconsistencies */
.portfolio-root {
  width: 100%;
  max-width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  /* Single background for entire page */
  background: var(--global-background);
  min-height: 100vh;
}

/* ===== SECTION BASE (All sections inherit) ===== */
section {
  width: 100%;
  max-width: 100%; /* Critical for mobile */
  overflow-x: hidden;
  /* Remove individual backgrounds - handled by .portfolio-root */
  background: transparent !important;
  position: relative;
  padding: clamp(40px, 8vh, 80px) clamp(16px, 4vw, 24px);
}

/* Section inner containers */
.section-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 clamp(16px, 3vw, 24px);
  width: 100%;
}

/* ===== RESPONSIVE BREAKPOINTS (Single Source of Truth) ===== */
:root {
  /* Breakpoints */
  --mobile-s: 320px;
  --mobile-m: 375px;
  --mobile-l: 425px;
  --tablet: 768px;
  --laptop: 1024px;
  --laptop-l: 1440px;
  --desktop: 2560px;
  
  /* Safe area for mobile (accounts for notches, etc.) */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
}

/* ===== GRID SYSTEM (Unified Responsive) ===== */
.responsive-grid {
  display: grid;
  gap: clamp(16px, 4vw, 32px);
  width: 100%;
}

/* Mobile: Always single column */
@media (max-width: 767px) {
  .responsive-grid {
    grid-template-columns: 1fr !important;
  }
}

/* Tablet: Two columns */
@media (min-width: 768px) and (max-width: 1023px) {
  .responsive-grid {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
}

/* Desktop: Three+ columns */
@media (min-width: 1024px) {
  .responsive-grid {
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
}

/* ===== TYPOGRAPHY SCALE ===== */
:root {
  --font-mono: Monaco, "Lucida Console", monospace;
  --font-system: system-ui, Avenir, Helvetica, Arial, sans-serif;
  
  /* Responsive type scale */
  --text-xs: clamp(0.7rem, 1.5vw, 0.75rem);
  --text-sm: clamp(0.8rem, 2vw, 0.875rem);
  --text-base: clamp(0.875rem, 2.5vw, 1rem);
  --text-lg: clamp(1rem, 2.5vw, 1.125rem);
  --text-xl: clamp(1.1rem, 3vw, 1.25rem);
  --text-2xl: clamp(1.5rem, 5vw, 2.25rem);
  --text-3xl: clamp(1.8rem, 6vw, 3rem);
  --text-4xl: clamp(2rem, 8vw, 4.5rem);
}

/* ===== SPACING SCALE ===== */
:root {
  --space-xs: clamp(4px, 1vw, 8px);
  --space-sm: clamp(8px, 2vw, 12px);
  --space-md: clamp(12px, 3vw, 16px);
  --space-lg: clamp(16px, 4vw, 24px);
  --space-xl: clamp(24px, 6vw, 32px);
  --space-2xl: clamp(32px, 8vw, 48px);
  --space-3xl: clamp(48px, 10vw, 64px);
}

/* ===== MOBILE OPTIMIZATIONS ===== */
@media (max-width: 767px) {
  /* Reduce padding on mobile */
  section {
    padding: clamp(30px, 6vh, 50px) clamp(12px, 3vw, 16px);
  }
  
  /* Touch-friendly targets */
  button, a, .clickable {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Prevent text zoom on iOS */
  input, select, textarea {
    font-size: 16px !important;
  }
}

/* ===== iOS SAFARI FIXES ===== */
@supports (-webkit-touch-callout: none) {
  .portfolio-root {
    min-height: -webkit-fill-available;
  }
  
  section {
    min-height: -webkit-fill-available;
  }
}

/* ===== LANDSCAPE MOBILE ===== */
@media (max-height: 500px) and (orientation: landscape) {
  section {
    padding: clamp(20px, 4vh, 40px) clamp(12px, 3vw, 20px);
  }
}

/* ===== ACCESSIBILITY ===== */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===== HIGH CONTRAST MODE ===== */
@media (prefers-contrast: high) {
  :root {
    --border-color: currentColor;
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  section {
    page-break-inside: avoid;
  }
  
  .no-print {
    display: none !important;
  }
}